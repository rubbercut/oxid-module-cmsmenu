<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>widget/header/categorylist.tpl changes</title>
    <style type="text/css">
        body { width: 100%; max-width: 1600px; margin: 0 auto; }
        h1 { font-size: 2rem; color: magenta;}
        .tableheader { font-size: 125%; }
        ol { background: #DAFCFF; border: 1px solid #cfcfcf; padding: 15px 15px  15px 40px;}
        ol li { border-bottom: 1px solid #C8FFFF; padding: 3px; }
        ol li.new { background: #A4FF99; font-weight: bold;}
        ol li.chg { background: #FFFA99; font-weight: bold;}
    </style>
</head>
<body>
    <h1>top categories menu - cms submenu</h1>
    <h2>1: edit widget/header/categorylist.tpl</h2>
    <h3>legend:</h3>
    <ol>
        <li>default / original code</li>
        <li class="new">new added line</li>
        <li class="chg">original code has been changed (splitted, new line etc)</li>
    </ol>
    
    
    <table border="0" cellspacing="10">
        <!--
        <tr class="tableheader"><th>original 4.7</th><th>changes:</th></tr>
        <tr>
            <td>coming soon...</td>
            <td>coming soon...</td>
        </tr>
        <tr><td colspan="2"><hr/></td></tr>
        <tr class="tableheader"><th>original 4.8</th><th>changes:</th></tr>
        <tr>
            <td>coming soon...</td>
            <td>coming soon...</td>
        </tr>
        -->
        
        <tr><td colspan="2"><hr/></td></tr>
        <tr class="tableheader"><th>original 4.9</th><th>changes:</th></tr>
        <tr>
            <td>
<ol start="17">
<li>[{if $iCatCnt &lt;= $oView-&gt;getTopNavigationCatCnt()}]</li>
<li>&lt;li&gt;&lt;a href=&quot;[{$oTopCont-&gt;getLink()}]&quot;&gt;[{$oTopCont-&gt;oxcontents__oxtitle-&gt;value}]&lt;/a&gt;&lt;/li&gt;</li>
<li>[{else}]</li>
</ol>
            </td>
            <td>
<ol start="17">
<li>[{if $iCatCnt &lt;= $oView-&gt;getTopNavigationCatCnt()}]</li>
<li class="chg">&lt;li&gt;&lt;a href=&quot;[{$oTopCont-&gt;getLink()}]&quot;&gt;[{$oTopCont-&gt;oxcontents__oxtitle-&gt;value}]&lt;/a&gt;</li>
<li class="new">[{block name="categorylist_cmsmenu"}][{/block}]</li>
<li class="chg">&lt;/li&gt;</li>
<li>[{else}]</li>
</ol>
                </td>
        </tr>
    </table>
    
    <hr/>
    <h2>2: upload and activate module</h2>
    <p>
        module will create 6 demo cms pages for you to understand, how it works: cmsmenu_top1, cmsmenu_top1_sub1, cmsmenu_top1_sub2, cmsmenu_top1_sub2_sub1, cmsmenu_top1_sub2_sub2 and placeholder_contact
        <ul>
            <li>after module activation, go to the cms pages management in admin panel</li>
            <li>edit cms page with ident "cmsmenu_top1"</li>
            <lI>select the category, where the cms page will be inserted and click "save"</lI>
            <li>check the shop frontend, you should get something like this:</li>
        </ul>
    </p>
    
    <h2>3: amount of submenu levels</h2>
    <p>edit <b>modules/vt-cmsstructure/views/blocks/categorylist_cmsmenu.tpl</b> and change the "iTotalNavigationLevels" value.</p>
    
    <h1>sidebar cms menu</h1>
    <p>cms pages inside this menu are pages with "Upper Menu" type (where you can choose between "snippet", "upper menu", "category" and "manually")</p>
    <p>the first  submenu level from "cmsmenu_top1" is also set as "upperr menu", so the will appear in the sidebar as a menu when you are viewing a cms page</p>
    
    <h1>how to include contact or newsletter page into cms menu:</h1>
    <p>Like here: <a href="https://www.bestlife-shop.de/kontakt/" target="_blank">https://www.bestlife-shop.de/kontakt/</a> (sorry, german language only), the contact and newsletter pages are shown inside the cms menu although they are view classes and not cms pages</p>
    <h2>how it works:</h2>
    <p>Have a look at the <b>placeholder_contact</b> cms page. its marked as <b>external</b> and its content is smarty function oxgetseourl for contact page.</p>
    <p>External cms pages will return <b>their content as the link</b>, e.g. if you create an external cms page and input "http://google.com/" as content, the user will go to google.com when click on the cms page.</p>
    <p>Theoretically, you could do a lot of stuff with this function, like redeeming coupon codes or sending formulars. I have not tested it yet</p>
    <h2>edit modules/vt-cmsstructure/views/tpl/sidebar_cmsmenu.tpl</h2>
    <table border="0" cellspacing="10">
        <tr>
            <td>
<ol start="7">
<li>[{elseif $oView->getClassName() == "contact" }]</li>
<li>   [{assign var="current" value="<b>placeholder_contact</b>"}]</li>
<li>   [{assign var="top" value="<b>cmsmenu_top1_sub2</b>" }]</li>
<li>[{elseif $oView->getClassName() == "newsletter" }]</li>
<li>   [{assign var="current" value="placeholder_newsletter"}]</li>
<li>   [{assign var="top" value="cmsmenu_top1_sub2" }]</li>
</ol>
            </td>
            <td>
                <ul>
                    <li><b>placeholder_contact</b> is a menu placeholder for the contact page.</li>
                    <li>On contact page, the ident "placeholder_contact" will be set as the current active, so the menu entry will be highlighted as current.</li>
                    <li>if contact is a subpage of another cms page, set the <b></b>cms ident of the parent cms</b> as the value of $top</li>
                    <li>demo cms pages contain placeholder_contact which is a subpage of cmsnue top 1 - sub 2, so there is it's ident in $top</li>
                    <hr/>
                    <li>now create new cms page "<b>placeholder_newsletter</b>"</li>
                    <li>check "active" + "external", set "Newsletter" as title and  "<b>cmsmenu_top1_sub2</b>" as the parent ident</li>
                    <li>paste this as content: (<u>disable tinymce or another wysisyg editor when doing this!</u>)<br/><input type="text" style="width:100%;" value="[{ oxgetseourl ident=$oViewConf->getSslSelfLink()|cat:'cl=newsletter' }]"></li>
                    <li>save and check the frontend, you should get newsletter into your cms menu</li>
                </ul>
                 
            </td>
        </tr>
    </table>
    <p>same stuff should be possible for other pages like links, news, guestbook ...</p>
    
    
    
</body>
</html>